{% extends 'layout.html' %}

{% block title %}–ü—Ä–æ–¥–∞–∂–∏{% endblock %}

{% block content %}
<div class="content-card">
    <h1 class="welcome-title">üí∞ –ü—Ä–æ–¥–∞–∂–∏</h1>
    {% if session.get('role') != 'viewer' %}
    <a href="{{ url_for('sales_add') }}" class="btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É</a>
    {% endif %}
    <input type="text" id="searchInput" onkeyup="searchTable('searchInput', 'salesTable')" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä—É...">
    <input type="date" id="fromDate" onchange="filterByDate()" placeholder="–û—Ç –¥–∞—Ç—ã">
    <input type="date" id="toDate" onchange="filterByDate()" placeholder="–î–æ –¥–∞—Ç—ã">
    <table id="salesTable">
        <thead>
            <tr>
                <th>–¢–æ–≤–∞—Ä</th>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>–î–∞—Ç–∞</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                <th>–¶–µ–Ω–∞</th>
                {% if session.get('role') != 'viewer' %}
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for sale in sales %}
            <tr>
                <td>{{ sale.equipment }}</td>
                <td>{{ sale.category }}</td>
                <td data-date="{{ sale.date }}">{{ sale.date }}</td>
                <td>{{ sale.quantity }}</td>
                <td>{{ '{:,.0f}'.format(sale.price) }} $</td>
                {% if session.get('role') != 'viewer' %}
                <td>
                    <a href="{{ url_for('sales_edit', sale_id=sale.id) }}" class="button-link">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <a href="{{ url_for('sales_delete', sale_id=sale.id) }}" class="button-link">–£–¥–∞–ª–∏—Ç—å</a>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <script src="{{ url_for('static', filename='js/filters.js') }}"></script>
</div>
{% endblock %}
